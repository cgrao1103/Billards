<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a Shot</title>
    <style>
        #poolTableContainer {
            width: 1400px;
            height: 2750px;
            margin: 0 auto;
            position: relative;
        }
        #poolTable {
            width: 100%;
            height: 100%;
        }
        .ball {
            cursor: pointer;
        }
        #cueBall {
            fill: white;
            r: 28;
            cx: 677;
            cy: 731;
        }
        .otherBall {
            fill: black;
        }
        #otherBall1 {
            r: 114;
            cx: 0;
            cy: 0;
        }
        #otherBall2 {
            r: 114;
            cx: 0;
            cy: 1350;
        }
        #otherBall3 {
            r: 114;
            cx: 0;
            cy: 2700;
        }
        #otherBall4 {
            r: 114;
            cx: 1350;
            cy: 0;
        }
        #otherBall5 {
            r: 114;
            cx: 1350;
            cy: 1350;
        }
        #otherBall6 {
            r: 114;
            cx: 1350;
            cy: 2700;
        }
        #otherBall7 {
            fill: yellow;
            r: 28;
            cx: 675;
            cy: 675;
        }
        #otherBall8 {
            fill: blue;
            r: 28;
            cx: 643;
            cy: 623;
        }
        #otherBall9 {
            fill: red;
            r: 28;
            cx: 704;
            cy: 622;
        }
    </style>
</head>
<body>
    <div id="poolTableContainer">
        <svg id="poolTable" viewBox="-25 -25 1400 2750" xmlns="http://www.w3.org/2000/svg">
            <rect width="1350" height="2700" x="0" y="0" fill="#C0D0C0" />
            <rect width="1400" height="25" x="-25" y="0" fill="darkgreen" />
            <rect width="1400" height="25" x="-25" y="2700" fill="darkgreen" />
            <rect width="25" height="2750" x="0" y="-25" fill="darkgreen" />
            <rect width="25" height="2750" x="1350" y="-25" fill="darkgreen" />
            <circle class="otherBall" id="otherBall1" />
            <circle class="otherBall" id="otherBall2" />
            <circle class="otherBall" id="otherBall3" />
            <circle class="otherBall" id="otherBall4" />
            <circle class="otherBall" id="otherBall5" />
            <circle class="otherBall" id="otherBall6" />
            <circle class="ball" id="cueBall" />
            <circle class="otherBall" id="otherBall7" />
            <circle class="otherBall" id="otherBall8" />
            <circle class="otherBall" id="otherBall9" />
        </svg>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const poolTable = document.getElementById('poolTable');
            const cueBall = document.getElementById('cueBall');
            const otherBalls = document.querySelectorAll('.otherBall');

            let isDragging = false;
            let guideLine = null;

            cueBall.addEventListener('mousedown', function(event) {
                isDragging = true;
            });

            document.addEventListener('mousemove', function(event) {
                if (isDragging) {
                    if (!guideLine) {
                        guideLine = document.createElementNS("http://www.w3.org/2000/svg", 'line');
                        guideLine.setAttribute('id', 'guideLine');
                        guideLine.setAttribute('stroke', 'white');
                        guideLine.setAttribute('stroke-width', '3');
                        poolTable.appendChild(guideLine);
                    }
                    const cueBallRect = cueBall.getBoundingClientRect();
                    const cueBallCenterX = cueBallRect.left + cueBallRect.width / 2;
                    const cueBallCenterY = cueBallRect.top + cueBallRect.height / 2;
                    guideLine.setAttribute('x1', cueBallCenterX);
                    guideLine.setAttribute('y1', cueBallCenterY);
                    guideLine.setAttribute('x2', event.clientX);
                    guideLine.setAttribute('y2', event.clientY);
                }
            });

            document.addEventListener('mouseup', function(event) {
                if (isDragging) {
                    isDragging = false;
                    if (guideLine) {
                        poolTable.removeChild(guideLine);
                        guideLine = null;
                    }
                    const releasePositionX = event.clientX;
                    const releasePositionY = event.clientY;
                    const cueBallCenterX = cueBall.getAttribute('cx');
                    const cueBallCenterY = cueBall.getAttribute('cy');
                    const velocityX = releasePositionX - cueBallCenterX;
                    const velocityY = releasePositionY - cueBallCenterY;
                    console.log('Initial Velocity X:', velocityX);
                    console.log('Initial Velocity Y:', velocityY);
                    // Call function to send initial velocity to server
                    sendInitialVelocityToServer(velocityX, velocityY);
                }
            });
        });

        function sendInitialVelocityToServer(velocityX, velocityY) {
            // Implement sending initial velocity to server
            console.log('Sending initial velocity to server:', velocityX, velocityY);
        }
    </script>
</body>
</html>
