<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a Shot</title>
    <style>
        body {
            background-color: #282c34;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        #poolTableContainer {
            width: 80%;
            max-width: 700px;
            margin: 0 auto;
            border: 2px solid black;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            display: flex; /* Center the content horizontally */
            justify-content: center; /* Center the content horizontally */
        }

        #poolTable {
            width: 100%;
            height: 100%;
            background-color: green;
        }

        .ball {
            fill: white;
            cursor: pointer;
        }

        #cueBall {
            r: 28; /* Increased radius */
        }

        #guideLine {
            stroke: white;
            stroke-width: 6; /* Increased stroke width */
        }
    </style>
</head>
<body>
    <div id="poolTableContainer">
        <svg id="poolTable" viewBox="0 0 1378 2723" xmlns="http://www.w3.org/2000/svg">
            <rect width="1350" height="2750" x="0" y="0" fill="#C0D0C0" />
            <rect width="1350" height="25" x="-25" y="0" fill="darkgreen" />
            <rect width="1350" height="25" x="-25" y="2700" fill="darkgreen" />
            <rect width="25" height="2750" x="0" y="-25" fill="darkgreen" />
            <rect width="25" height="2750" x="1350" y="-25" fill="darkgreen" />
            <circle class="ball" id="cueBall" cx="675" cy="2025" r="28" fill="WHITE" /> 
            <circle cx="675" cy="675" r="28" fill="YELLOW" />
            <circle cx="643" cy="623" r="28" fill="BLUE" />
            <circle cx="704" cy="622" r="28" fill="RED" />
            
            <circle cx="672" cy="573" r="28" fill="PURPLE"/>
            <circle cx="730" cy="573" r="28" fill="ORANGE" />
            <circle cx="613" cy="573" r="28" fill="GREEN" />

            <circle cx="640" cy="523" r="28" fill="BROWN" />
            <circle cx="701" cy="523" r="28" fill="BLACK" />
            <circle cx="762" cy="523" r="28" fill="LIGHTYELLOW" />
            <circle cx="582" cy="523" r="28" fill="LIGHTBLUE" />
            
            <circle cx="668" cy="472" r="28" fill="PINK"/>
            <circle cx="730" cy="472" r="28" fill="MEDIUMPURPLE" />
            <circle cx="610" cy="472" r="28" fill="LIGHTSALMON" />

            <circle cx="552" cy="472" r="28" fill="LIGHTGREEN" />
            <circle cx="788" cy="472" r="28" fill="SANDYBROWN" />

            

            <circle cx="0" cy="0" r="114" fill="black" />
            <circle cx="0" cy="1350" r="114" fill="black" />
            <circle cx="0" cy="2700" r="114" fill="black" />
            <circle cx="1350" cy="0" r="114" fill="black" />
            <circle cx="1350" cy="1350" r="114" fill="black" />
            <circle cx="1350" cy="2700" r="114" fill="black" />
            BALL_COLOURS = [
    "WHITE",
    "YELLOW",
    "BLUE",
    "RED",
    "PURPLE",
    "ORANGE",
    "GREEN",
    "BROWN",
    "BLACK",
    "LIGHTYELLOW",
    "LIGHTBLUE",
    "PINK",
    "MEDIUMPURPLE",
    "LIGHTSALMON",
    "LIGHTGREEN",
    "SANDYBROWN"
]

        
        </svg>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const poolTable = document.getElementById('poolTable');
            const cueBall = document.getElementById('cueBall');
            let isDragging = false;
            let guideLine = null;
            let initialX, initialY;
    
            cueBall.addEventListener('mousedown', function(event) {
                isDragging = true;
                initialX = event.clientX;
                initialY = event.clientY;
                if (!guideLine) {
                    guideLine = document.createElementNS("http://www.w3.org/2000/svg", 'line');
                    guideLine.setAttribute('id', 'guideLine');
                    guideLine.setAttribute('stroke', 'white');
                    guideLine.setAttribute('stroke-width', '6');
                    poolTable.appendChild(guideLine);
                }
                const cueBallRect = cueBall.getBoundingClientRect();
                guideLine.setAttribute('x1', cueBall.getAttribute('cx'));
                guideLine.setAttribute('y1', cueBall.getAttribute('cy'));
                guideLine.setAttribute('x2', cueBall.getAttribute('cx'));
                guideLine.setAttribute('y2', cueBall.getAttribute('cy'));
            });
    
            document.addEventListener('mousemove', function(event) {
                if (isDragging) {
                    const cueBallRect = cueBall.getBoundingClientRect();
                    const mouseX = event.clientX - initialX + parseFloat(cueBall.getAttribute('cx'));
                    const mouseY = event.clientY - initialY + parseFloat(cueBall.getAttribute('cy'));
                    guideLine.setAttribute('x2', mouseX);
                    guideLine.setAttribute('y2', mouseY);
                }
            });
    
            document.addEventListener('mouseup', function(event) {
                if (isDragging) {
                    isDragging = false;
                    poolTable.removeChild(guideLine);
                    guideLine = null;
                    const cueBallRect = cueBall.getBoundingClientRect();
                    const cueBallCenterX = cueBallRect.left + cueBallRect.width / 2;
                    const cueBallCenterY = cueBallRect.top + cueBallRect.height / 2;
                    const releasePositionX = event.clientX;
                    const releasePositionY = event.clientY;
                    const velocityX = releasePositionX - cueBallCenterX;
                    const velocityY = releasePositionY - cueBallCenterY;
                    console.log('Initial Velocity X:', velocityX);
                    console.log('Initial Velocity Y:', velocityY);
    
                    // Create JSON object
                    const data = {
                        svg: poolTable.outerHTML,
                        velocityX: velocityX, // Include velocityX parameter
                        velocityY: velocityY
                    };
    
                    // Send JSON object to server
                    fetch('/send_data', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    }).then(response => {
                        if (response.ok) {
                            console.log('Data sent successfully.');
                        } else {
                            console.error('Failed to send data.');
                        }
                    }).catch(error => {
                        console.error('Error occurred while sending data:', error);
                    });
                }
            });
        });
    </script>
    
</body>
</html>
